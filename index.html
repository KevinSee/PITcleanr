<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cleans up PIT tag capture histories • PITcleanr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Cleans up PIT tag capture histories">
<meta property="og:description" content="This package takes a complete tag history file from PTAGIS and cleans it, compresses it and makes it ready for summaries or analyses.">
<meta property="og:image" content="https://kevinsee.github.io/PITcleanr/index.html/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">PITcleanr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    <li class="dropdown-header">Getting Started</li>
    <li>
      <a href="articles/Prep_PIT_data.html">Querying, Compressing, and Making Sense of PIT Tag Detection Data</a>
    </li>
    <li class="divider">
    <li>
      <a href="articles/index.html">More...</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/KevinSee/PITcleanr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="pitcleanr-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#pitcleanr-" class="anchor"></a>PITcleanr <a href="https://github.com/KevinSee/PITcleanr"><img src="reference/figures/logo.png" align="right" height="139"></a>
</h1></div>
<!-- badges: start -->

<div id="description" class="section level2">
<h2 class="hasAnchor">
<a href="#description" class="anchor"></a>Description</h2>
<p><code>PITcleanr</code> is an R package for preparing PIT tag data for further analysis. The package can help import complete tag histories from <a href="https://www.ptagis.org/">PTAGIS</a>, build a configuration file to help assign each detection to a “node”, and compress those detections into a smaller file. It contains functions to determine which detection locations are upstream or downstream of each other, build a parent-child relationship table describing whether detection locations are upstream or downstream in relation to each other, and assign directionality of movement between each detection location. For analyses that focus on one-way directional movement (e.g., straightforward CJS models), <code>PITcleanr</code> can help determine which detections fail to meet that one-way movement assumption and should be examined more closely, and which detections can be kept.</p>
<p>It was originally conceived as a companion to the <a href="https://github.com/KevinSee/DABOM">DABOM</a> package for estimating abundance of returning anadromous adult fish moving upstream. <code>PITcleanr</code> was designed to prepare the raw PIT tag observations from <a href="https://www.ptagis.org/">PTAGIS</a> for use in the <code>DABOM</code> package.</p>
<p>The user can find more information related to installation and use of this package on the <a href="https://kevinsee.github.io/PITcleanr/">package website</a>.</p>
</div>
<div id="installation-instructions" class="section level2">
<h2 class="hasAnchor">
<a href="#installation-instructions" class="anchor"></a>Installation Instructions</h2>
<p>The <code>PITcleanr</code> compendium can be downloaded as a zip from from this URL: <a href="https://github.com/KevinSee/PITcleanr/archive/master.zip" class="uri">https://github.com/KevinSee/PITcleanr/archive/master.zip</a></p>
<p>Or you can install the compendium as an R package from GitHub by using Hadley Wickham’s <code>devtools</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install and load remotes, if necessary</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"KevinSee/PITcleanr"</span>, 
                         build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><code>devtools</code> may require the downloading and installation of Rtools. The latest version of Rtools can be found <a href="https://cran.r-project.org/bin/windows/Rtools/">here</a>.</p>
<p>For the latest development version:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"KevinSee/PITcleanr@develop"</span><span class="op">)</span></code></pre></div>
<p>Be sure to use the <code>build_vignettes = TRUE</code> argument, as this will build all of the vignettes (i.e., user manuals) that are included with the package. Further instructions on how to use <code>PITcleanr</code> can be found in the vignettes, which can be accessed using:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/browseVignettes.html">browseVignettes</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"PITcleanr"</span><span class="op">)</span>
<span class="co">#&gt; No vignettes found by browseVignettes(package = "PITcleanr")</span></code></pre></div>
</div>
<div id="compressing-ptagis-detection-data" class="section level2">
<h2 class="hasAnchor">
<a href="#compressing-ptagis-detection-data" class="anchor"></a>Compressing PTAGIS Detection Data</h2>
<p>The complete tag history query output from <a href="https://ptagis.org/">PTAGIS</a> (e.g., <code>ptagis_file</code>) will provide a record for every detection of each tag code in the tag list. Again, this may include multiple detections on the same antenna, or the same site within a short period of time, leading to an unwieldy and perhaps messy dataset. One of the main purposes of <code>PITcleanr</code> is to compress that data into an initial summary using the function <code><a href="reference/compress.html">compress()</a></code>. At a minimum, this function requires a path e.g., <code>ptagis_file</code>, to the complete tag history query results downloaded from PTAGIS.</p>
<p>In our example, we perform the <code><a href="reference/compress.html">compress()</a></code> function on the <code>ptagis_file</code> object containing the file path to our query results, and write the output to an object <code>comp_obs</code> containing the compressed observations.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># view path to example file, of course you can also set ptagis_file to your own PTAGIS query results</span>
<span class="va">ptagis_file</span>
<span class="co">#&gt; [1] "/Users/seek/Library/R/4.0/library/PITcleanr/extdata/TUM_Chinook_2015.csv"</span>

<span class="co"># run compress() function on it</span>
<span class="va">comp_obs</span> <span class="op">=</span> <span class="fu"><a href="reference/compress.html">compress</a></span><span class="op">(</span><span class="va">ptagis_file</span><span class="op">)</span>

<span class="co"># look at first parts of resulting object</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">comp_obs</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 9</span>
<span class="co">#&gt;   tag_code       node    slot event_type_name n_dets min_det            </span>
<span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;            &lt;int&gt; &lt;dttm&gt;             </span>
<span class="co">#&gt; 1 384.3B239AD241 NASONC     1 Mark                 1 2013-11-04 16:45:00</span>
<span class="co">#&gt; 2 384.3B239AD241 JDJ        2 Observation         12 2014-05-25 11:14:29</span>
<span class="co">#&gt; 3 384.3B239AD241 BO4        3 Observation         11 2015-05-14 16:41:24</span>
<span class="co">#&gt; 4 384.3B239AD241 TD1        4 Observation          3 2015-05-16 11:15:40</span>
<span class="co">#&gt; 5 384.3B239AD241 MC2        5 Observation         17 2015-05-19 17:01:15</span>
<span class="co">#&gt; 6 384.3B239AD241 PRA        6 Observation          2 2015-05-24 13:51:16</span>
<span class="co">#&gt; # … with 3 more variables: max_det &lt;dttm&gt;, duration &lt;drtn&gt;, travel_time &lt;drtn&gt;</span></code></pre></div>
<p>The output consists of a tibble containing columns for:</p>
<ul>
<li>
<strong>tag_code:</strong> The unique PIT tag ID.</li>
<li>
<strong>node:</strong> By default, each site code from PTAGIS is considered a node. More on this below…</li>
<li>
<strong>slot:</strong> A detection “slot” for each tag, numbered in chronological order. Also more on this below…</li>
<li>
<strong>event_type_name:</strong> The type of “event”. Typically, mark, observation, recapture, or recovery.</li>
<li>
<strong>n_dets:</strong> The number of detections that occurred within that slot.</li>
<li>
<strong>min_det:</strong> The time of the first (min) detection in the slot.</li>
<li>
<strong>max_det:</strong> The time of the last (max) detection in the slot.</li>
<li>
<strong>duration:</strong> The duration of that slot (maximum - minimum detection time).</li>
<li>
<strong>travel_time:</strong> The travel time between the previous slot and that one.</li>
</ul>
<p><strong><em>A note on “nodes”</em></strong>: A node is the spatial scale of interest for the user. By default, the <code><a href="reference/compress.html">compress()</a></code> function considers a site code from PTAGIS as a node. However, a node could be defined as the individual PIT antenna a detection was made on, or the array that antenna is a part of, or groups of arrays, or sites, or groups of sites, or possibly even larger (e.g, any detection in <strong>this</strong> tributary!) depending on the spatial scale desired. The user may decide to define some arrays at particular sites to be their own nodes, while simultaneously lumping all the sites in a particular watershed into a single node. To utilize this kind of grouping, a configuration file or table must be supplied to the <code>configuration</code> argument in the <code><a href="reference/compress.html">compress()</a></code> function. This configuration file helps map what node each antenna or MRR site corresponds to. By default, <code>compress</code> assigns each site code to its own node.</p>
<p>Each slot in the output is defined as all detections on a particular node before the tag is detected on a different node. The user can define a maximum number of minutes between detections before a new slot should be defined by supplying a value to the <code>max_minutes</code> argument to <code><a href="reference/compress.html">compress()</a></code>. The units of the duration and travel_time columns can also be defined by the <code>units</code> argument. The default is minutes (<code>mins</code>). As an example, if a tag moves from node A to B and back to A, there will be three slots in the compressed data.</p>
<p>The help menu for <code><a href="reference/compress.html">compress()</a></code>, or any function for that matter, can be accessed using:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">?</span><span class="fu">PITcleanr</span><span class="fu">::</span><span class="va"><a href="reference/compress.html">compress</a></span></code></pre></div>
</div>
<div id="other-functionality" class="section level2">
<h2 class="hasAnchor">
<a href="#other-functionality" class="anchor"></a>Other Functionality</h2>
<p><code>PITcleanr</code> contains lots of additional functionality to help users summarize and further analyze the compressed PTAGIS observations. Find more details in the various vignettes.</p>
</div>
<div id="authors" class="section level2">
<h2 class="hasAnchor">
<a href="#authors" class="anchor"></a>Authors</h2>
<p>PITcleanr is a collaborative project, with the primary contributors being:</p>
<ul>
<li>Kevin See (Biomark, Inc. - Applied Biological Services)</li>
<li>Ryan N. Kinzer (Nez Perce Tribe - Fisheries Resources Management)</li>
<li>Rick Orme (Nez Perce Tribe - Fisheries Resources Management)</li>
<li>Mike Ackerman (Biomark, Inc. - Applied Biological Services)</li>
</ul>
<div id="licenses" class="section level3">
<h3 class="hasAnchor">
<a href="#licenses" class="anchor"></a>Licenses</h3>
<p><strong>Text and figures :</strong> <a href="http://creativecommons.org/licenses/by/4.0/">CC-BY-4.0</a></p>
<p><strong>Code :</strong> See the <a href="DESCRIPTION">DESCRIPTION</a> file</p>
<p><strong>Data :</strong> <a href="http://creativecommons.org/publicdomain/zero/1.0/">CC-0</a> attribution requested in reuse</p>
</div>
<div id="contributions" class="section level3">
<h3 class="hasAnchor">
<a href="#contributions" class="anchor"></a>Contributions</h3>
<p>We welcome contributions from everyone. Before you get started, please see our <a href="CONTRIBUTING.html">contributor guidelines</a>. Please note that this project is released with a <a href="CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>
<div id="questions" class="section level2">
<h2 class="hasAnchor">
<a href="#questions" class="anchor"></a>Questions?</h2>
<p>Please feel free to post an issue to this repository for requested features, bug fixes, errors in documentation, etc.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/KevinSee/PITcleanr/">https://​github.com/​KevinSee/​PITcleanr/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/KevinSee/PITcleanr/issues">https://​github.com/​KevinSee/​PITcleanr/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://creativecommons.org/licenses/by/4.0">CC BY 4.0</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Kevin See <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://mybinder.org/v2/gh/KevinSee/PITcleanr/master?urlpath=rstudio"><img src="https://mybinder.org/badge_logo.svg" alt="Binder"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Kevin See.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
