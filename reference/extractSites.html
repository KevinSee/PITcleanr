<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Extract Sites — extractSites • PITcleanr</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Extract Sites — extractSites"><meta property="og:description" content="The function takes complete capture histories downloaded from PTAGIS
and extracts all the detection sites from them. It matches those sites with
information from PTAGIS metadata, being sure to pull the metadata from the
correct configuration file."><meta property="og:image" content="https://kevinsee.github.io/PITcleanr/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PITcleanr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">Getting Started</li>
    <li>
      <a href="../articles/Prep_PIT_data.html">Querying, Compressing, and Making Sense of PIT Tag Detection Data</a>
    </li>
    <li class="divider">
    <li>
      <a href="../articles/index.html">More...</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/KevinSee/PITcleanr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract Sites</h1>
    <small class="dont-index">Source: <a href="https://github.com/KevinSee/PITcleanr/blob/HEAD/R/extractSites.R" class="external-link"><code>R/extractSites.R</code></a></small>
    <div class="hidden name"><code>extractSites.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function takes complete capture histories downloaded from PTAGIS
and extracts all the detection sites from them. It matches those sites with
information from PTAGIS metadata, being sure to pull the metadata from the
correct configuration file.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extractSites</span><span class="op">(</span></span>
<span>  cth_file <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  file_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"PTAGIS"</span>, <span class="st">"Biologic_csv"</span>, <span class="st">"raw"</span><span class="op">)</span>,</span>
<span>  as_sf <span class="op">=</span> <span class="cn">F</span>,</span>
<span>  crs <span class="op">=</span> <span class="fl">5070</span>,</span>
<span>  min_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  configuration <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>cth_file</dt>
<dd><p>is the path to the complete tag history file</p></dd>


<dt>file_type</dt>
<dd><p>describes the source of the complete tag history file.</p>
<p>If <code>PTAGIS</code>, then <code>cth_file</code> should be a PTAGIS observation file downloaded as a csv from PTAGIS.
This must be the output from a Complete Tag History query (part of the Advanced Reporting).
This query should contain: Tag, Mark Species, Mark Rear Type, Event Type, Event Site Type,
Event Site Code, Event Date Time, Antenna, Antenna Group Configuration,
Event Release Site Code, and Event Release Date Time.</p>
<p>If <code>Biologic_csv</code>, that implies the data was downloaded from Biologic software in a .csv format.</p>
<p>If <code>raw</code>, that implies the data was downloaded directly from the reader, in either a .log or .xlsx format. In this case, the largest string containing alphabetic characters in the file name will be assigned as the site code.</p></dd>


<dt>as_sf</dt>
<dd><p>Should the results be returned as an `sf` object (`TRUE`), or a tibble
(`FALSE`, and the default)?</p></dd>


<dt>crs</dt>
<dd><p>if `as_sf = TRUE`, what CRS should the resulting `sf` object be
transformed to? Default is 5070.</p></dd>


<dt>min_date</dt>
<dd><p>character in the format `YYYYMMDD` that describes a minimum detection date.
If supplied, sites with detections prior to this date will be excluded from the results.</p></dd>


<dt>max_date</dt>
<dd><p>character in the format `YYYYMMDD` that describes a maximum detection date.
If supplied, sites with detections after this date will be excluded from the results.</p></dd>


<dt>configuration</dt>
<dd><p>is a data frame which assigns node names to unique SiteID, AntennaID, and
site configuration ID combinations. One example can be built with the function `buildConfig`. If
no configuration file is provided, nodes are considered site codes by default. If nodes are assigned,
the column name should be `node`.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a tibble</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Kevin See</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">ptagis_file</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"TUM_Chinook_2015.csv"</span>, package <span class="op">=</span> <span class="st">"PITcleanr"</span>, mustWork <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ptagis_cth</span> <span class="op">=</span> <span class="fu"><a href="readCTH.html">readCTH</a></span><span class="op">(</span><span class="va">ptagis_file</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">extractSites</span><span class="op">(</span><span class="va">ptagis_cth</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Querying INT sites' metadata</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Querying INT sites' configuration information</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Querying MRR sites' metadata</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 54 x 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    site_code site_name site_type type  latitude longitude rkm   site_description</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> NASONC    Nason Cr~ <span style="color: #BB0000;">NA</span>        MRR       47.8     -<span style="color: #BB0000;">121.</span> 754.~ River           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> JDJ       John Day~ Juvenile~ INT       45.7     -<span style="color: #BB0000;">121.</span> 347   This site monit~</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> NAL       Lower Na~ Instream~ INT       47.8     -<span style="color: #BB0000;">121.</span> 754.~ This is a perma~</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> NAU       Upper Na~ Instream~ INT       47.8     -<span style="color: #BB0000;">121.</span> 754.~ This is a perma~</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> BO4       Bonnevil~ Adult Fi~ INT       45.6     -<span style="color: #BB0000;">122.</span> 234   This site monit~</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> MC2       McNary W~ Adult Fi~ INT       45.9     -<span style="color: #BB0000;">119.</span> 470   This site monit~</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> PRA       Priest R~ Adult Fi~ INT       46.6     -<span style="color: #BB0000;">120.</span> 639   Priest Rapids D~</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> TD1       The Dall~ Adult Fi~ INT       45.6     -<span style="color: #BB0000;">121.</span> 308   This site monit~</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> TUF       Tumwater~ Adult Fi~ INT       47.6     -<span style="color: #BB0000;">121.</span> 754.~ Adult Fishway a~</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> TUM       Tumwater~ <span style="color: #BB0000;">NA</span>        MRR       47.6     -<span style="color: #BB0000;">121.</span> 754.~ Dam             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># i 44 more rows</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Kevin See.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

